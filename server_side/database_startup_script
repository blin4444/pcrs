CREATE DATABASE PCRS;

CREATE TABLE IF NOT EXISTS User(id INT NOT NULL AUTO_INCREMENT PRIMARY KEY, 
	token VARCHAR(10) UNIQUE NOT NULL);
	
		
CREATE TABLE IF NOT EXISTS Reason(id INT NOT NULL AUTO_INCREMENT PRIMARY KEY, 
	text VARCHAR(255));

CREATE TABLE IF NOT EXISTS Sign_In (id INT NOT NULL AUTO_INCREMENT PRIMARY KEY, 
	user_id INT NOT NULL,
	reason_id INT NOT NULL, 
	sign_in_time DATETIME NOT NULL,
	CONSTRAINT FOREIGN KEY(user_id) REFERENCES User(id) ON DELETE CASCADE ON UPDATE CASCADE,
	CONSTRAINT FOREIGN KEY(reason_id) REFERENCES Reason(id) ON DELETE NO ACTION ON UPDATE CASCADE);

CREATE TABLE IF NOT EXISTS User_Info(
	id INT PRIMARY KEY,
	last_name VARCHAR(30),
	first_name VARCHAR(30),
	middle_name VARCHAR(30),
	sex CHAR(1),
	sin INT UNIQUE,
	date_of_birth DATE,
	street_address VARCHAR(30),
	city VARCHAR(30),
	province VARCHAR(20),
	postal_code VARCHAR(6),
	phone CHAR(10),
	alternate_phone CHAR(10),
	email VARCHAR(30),
	CONSTRAINT FOREIGN KEY(id) REFERENCES User(id) ON DELETE CASCADE ON UPDATE CASCADE);
